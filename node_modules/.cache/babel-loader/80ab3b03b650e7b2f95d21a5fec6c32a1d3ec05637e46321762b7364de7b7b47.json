{"ast":null,"code":"import { defineComponent, ref, computed, watch, onBeforeMount } from 'vue';\nimport swapiPlanet from '@/api/swapiService';\nimport formatDate from '@/composables/DateComposable';\nexport default defineComponent({\n  name: \"TablePlanet\",\n  setup() {\n    const data = ref([]); // Holds the API data\n    const sortBy = ref(null); // Holds the current sorting column\n    const sortDesc = ref(false); // Determines whether to sort in descending order\n    const arrowIconName = ref(\"arrow_drop_up\");\n    const sortedData = computed(() => data.value);\n    onBeforeMount(async () => {\n      data.value = await swapiPlanet.fetchData();\n    });\n\n    // Watch the sortBy and sortDesc refs for changes and sort the data accordingly\n    watch([sortBy, sortDesc], () => {\n      if (sortBy.value) {\n        data.value.sort((a, b) => {\n          const modifier = sortDesc.value ? -1 : 1;\n          modifier === 1 ? arrowIconName.value = \"arrow_drop_up\" : arrowIconName.value = \"arrow_drop_down\";\n          if (a[sortBy.value] < b[sortBy.value]) return -1 * modifier;\n          if (a[sortBy.value] > b[sortBy.value]) return 1 * modifier;\n          return 0;\n        });\n      }\n    });\n    const sort = column => {\n      if (sortBy.value === column) {\n        sortDesc.value = !sortDesc.value;\n      } else {\n        sortBy.value = column;\n        sortDesc.value = false;\n      }\n    };\n\n    // Return the reactive data and methods\n    return {\n      data,\n      sortBy,\n      sortDesc,\n      sortedData,\n      arrowIconName,\n      formatDate,\n      sort\n    };\n  }\n});","map":{"version":3,"names":["defineComponent","ref","computed","watch","onBeforeMount","swapiPlanet","formatDate","name","setup","data","sortBy","sortDesc","arrowIconName","sortedData","value","fetchData","sort","a","b","modifier","column"],"sources":["/Users/matiasortiz/qu-test-api-table/src/components/Table.vue"],"sourcesContent":["<template>\n  <div class=\"p-4\">\n    <h3>Star Wars Planets</h3>\n    <div class=\"table-planets\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th @click=\"sort('name')\">Name\n              <span v-if=\"sortBy == 'name'\" class=\"material-icons\">{{arrowIconName}}</span>\n              <span v-else class=\"material-icons\">sort</span>\n            </th>\n            <th @click=\"sort('climate')\">Climate\n              <span v-if=\"sortBy == 'climate'\" class=\"material-icons\">{{arrowIconName}}</span>\n              <span v-else class=\"material-icons\">sort</span>\n            </th>\n            <th @click=\"sort('diameter')\">Diameter</th>\n            <th @click=\"sort('gravity')\">Gravity\n              <span v-if=\"sortBy == 'name'\" class=\"material-icons\">{{arrowIconName}}</span>\n              <span v-else class=\"material-icons\">sort</span>\n            </th>\n            <th @click=\"sort('created')\">Created\n              <span v-if=\"sortBy == 'created'\" class=\"material-icons\">{{arrowIconName}}</span>\n              <span v-else class=\"material-icons\">sort</span>\n            </th>\n            <th @click=\"sort('orbital_period')\">Orbital Period</th>\n            <th @click=\"sort('population')\">Population</th>\n            <th @click=\"sort('rotation_period')\">Rotation Period</th>\n            <th @click=\"sort('surface_water')\">Surface Water</th>\n            <th @click=\"sort('terrain')\">Terrain\n              <span v-if=\"sortBy == 'terrain'\" class=\"material-icons\">{{arrowIconName}}</span>\n              <span v-else class=\"material-icons\">sort</span>\n            </th>\n            <th @click=\"sort('edited')\">Edited\n              <span v-if=\"sortBy == 'edited'\" class=\"material-icons\">{{arrowIconName}}</span>\n              <span v-else class=\"material-icons\">sort</span>\n            </th>\n          </tr>\n        </thead>\n        <tbody class=\"table-group-divider\">\n          <tr v-for=\"(item, index) in sortedData\" :key=\"index\">\n            <td>{{ item.name }}</td>\n            <td>{{ item.climate }}</td>\n            <td>{{ item.diameter }}</td>\n            <td>{{ item.gravity }}</td>\n            <td>{{ formatDate(item.created) }}</td>\n            <td>{{ item.orbital_period }}</td>\n            <td>{{ item.population }}</td>\n            <td>{{ item.rotation_period }}</td>\n            <td>{{ item.surface_water }}</td>\n            <td>{{ item.terrain }}</td>\n            <td>{{ formatDate(item.edited) }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div> \n  </div>\n</template>\n\n<script>\nimport { defineComponent, ref, computed, watch, onBeforeMount } from 'vue';\nimport swapiPlanet from '@/api/swapiService';\n\nimport formatDate from '@/composables/DateComposable';\n\nexport default defineComponent({\n  name: \"TablePlanet\",\n  setup() {\n\n    const data = ref([]); // Holds the API data\n    const sortBy = ref(null); // Holds the current sorting column\n    const sortDesc = ref(false); // Determines whether to sort in descending order\n    const arrowIconName = ref(\"arrow_drop_up\");\n    const sortedData = computed(() => data.value)\n\n    onBeforeMount(async () => {\n      data.value = await swapiPlanet.fetchData()\n    });\n\n    // Watch the sortBy and sortDesc refs for changes and sort the data accordingly\n    watch([sortBy, sortDesc], () => {\n      if (sortBy.value) {\n        data.value.sort((a, b) => {\n          const modifier = sortDesc.value ? -1 : 1;\n          modifier === 1 ?  arrowIconName.value = \"arrow_drop_up\" : arrowIconName.value = \"arrow_drop_down\" ;\n          if (a[sortBy.value] < b[sortBy.value]) return -1 * modifier;\n          if (a[sortBy.value] > b[sortBy.value]) return 1 * modifier;\n          return 0;\n        });\n      }\n    });\n\n    const sort = (column) => {\n      if (sortBy.value === column) {\n        sortDesc.value = !sortDesc.value;\n      } else {\n        sortBy.value = column;\n        sortDesc.value = false;\n      }\n\n    };\n\n    // Return the reactive data and methods\n    return {\n      data,\n      sortBy,\n      sortDesc,\n      sortedData,\n      arrowIconName,\n      formatDate,\n      sort,\n      \n    };\n  },\n});\n</script>\n<style>\n\n.table-planets{\n    padding: 1rem;\n    border: solid var(--bs-border-color);\n    border-width: 1px;\n    border-radius: var(--bs-border-radius);\n}\n\n.material-icons {\n    vertical-align: -6px;\n}\n\n</style>\n"],"mappings":"AA2DA,SAASA,eAAe,EAAEC,GAAG,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,aAAY,QAAS,KAAK;AAC1E,OAAOC,WAAU,MAAO,oBAAoB;AAE5C,OAAOC,UAAS,MAAO,8BAA8B;AAErD,eAAeN,eAAe,CAAC;EAC7BO,IAAI,EAAE,aAAa;EACnBC,KAAKA,CAAA,EAAG;IAEN,MAAMC,IAAG,GAAIR,GAAG,CAAC,EAAE,CAAC,EAAE;IACtB,MAAMS,MAAK,GAAIT,GAAG,CAAC,IAAI,CAAC,EAAE;IAC1B,MAAMU,QAAO,GAAIV,GAAG,CAAC,KAAK,CAAC,EAAE;IAC7B,MAAMW,aAAY,GAAIX,GAAG,CAAC,eAAe,CAAC;IAC1C,MAAMY,UAAS,GAAIX,QAAQ,CAAC,MAAMO,IAAI,CAACK,KAAK;IAE5CV,aAAa,CAAC,YAAY;MACxBK,IAAI,CAACK,KAAI,GAAI,MAAMT,WAAW,CAACU,SAAS,CAAC;IAC3C,CAAC,CAAC;;IAEF;IACAZ,KAAK,CAAC,CAACO,MAAM,EAAEC,QAAQ,CAAC,EAAE,MAAM;MAC9B,IAAID,MAAM,CAACI,KAAK,EAAE;QAChBL,IAAI,CAACK,KAAK,CAACE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;UACxB,MAAMC,QAAO,GAAIR,QAAQ,CAACG,KAAI,GAAI,CAAC,IAAI,CAAC;UACxCK,QAAO,KAAM,IAAKP,aAAa,CAACE,KAAI,GAAI,eAAc,GAAIF,aAAa,CAACE,KAAI,GAAI,iBAAgB;UAChG,IAAIG,CAAC,CAACP,MAAM,CAACI,KAAK,IAAII,CAAC,CAACR,MAAM,CAACI,KAAK,CAAC,EAAE,OAAO,CAAC,IAAIK,QAAQ;UAC3D,IAAIF,CAAC,CAACP,MAAM,CAACI,KAAK,IAAII,CAAC,CAACR,MAAM,CAACI,KAAK,CAAC,EAAE,OAAO,IAAIK,QAAQ;UAC1D,OAAO,CAAC;QACV,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEF,MAAMH,IAAG,GAAKI,MAAM,IAAK;MACvB,IAAIV,MAAM,CAACI,KAAI,KAAMM,MAAM,EAAE;QAC3BT,QAAQ,CAACG,KAAI,GAAI,CAACH,QAAQ,CAACG,KAAK;MAClC,OAAO;QACLJ,MAAM,CAACI,KAAI,GAAIM,MAAM;QACrBT,QAAQ,CAACG,KAAI,GAAI,KAAK;MACxB;IAEF,CAAC;;IAED;IACA,OAAO;MACLL,IAAI;MACJC,MAAM;MACNC,QAAQ;MACRE,UAAU;MACVD,aAAa;MACbN,UAAU;MACVU;IAEF,CAAC;EACH;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}